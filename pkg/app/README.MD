# Application Core ‚Äî Usage Guide

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `App` –∏ –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É  
(–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π, –∑–∞–ø—É—Å–∫, graceful shutdown).

---

## üß† –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

### App

`App` ‚Äî —ç—Ç–æ –∫–æ—Ä–µ–Ω—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.  
–û–Ω –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞:
- –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- —Å–æ–∑–¥–∞–Ω–∏–µ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏ –∑–∞–ø—É—Å–∫ —è–¥–µ—Ä
- —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏ –∑–∞–ø—É—Å–∫ –±–∏–∑–Ω–µ—Å –º–æ–¥—É–ª–µ–π
- –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã

---

## üß± –Ø–¥—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Kernel)

–Ø–¥—Ä–æ ‚Äî —ç—Ç–æ –ª–æ–≥–∏—á–µ—Å–∫–∏–π –º–æ–¥—É–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã (HTTP, –ë—Ä–æ–∫–µ—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π, —Ä–∞–±–æ—Ç–∞ —Å –ë–î –∏ —Ç–ø)

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —è–¥—Ä–∞

```go
type KernelInterface interface {
    Name() string
    Register(app *App) error
    Start(app *App) error
    Stop(ctx context.Context) error
}
```

---

## üß± –ú–æ–¥—É–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ú–æ–¥—É–ª—å ‚Äî —ç—Ç–æ –ª–æ–≥–∏—á–µ—Å–∫–∏–π –±–∏–∑–Ω–µ—Å-–±–ª–æ–∫:
- —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–≤–æ–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ø–æ–¥–∫–ª—é—á–∞–µ—Ç —Ä–æ—É—Ç—ã / –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
- –Ω–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç lifecycle —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞–ø—Ä—è–º—É—é

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–¥—É–ª—è

```go
type ModuleInterface interface {
    Name() string
	Init(app *App) error
}
```

> ‚ùó `Name()` **–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º** –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–º

---

### –ü—Ä–∏–º–µ—Ä –º–æ–¥—É–ª—è

```go
type CommonModule struct{}

func (CommonModule) Name() string {
    return "common"
}

func (m CommonModule) Register(app *app.App) error {
    di.Register(app.Container, &ClockService{})
	
    return nil
}
```

---

## –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –°–æ–∑–¥–∞–Ω–∏–µ `App`
2. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —è–¥–µ—Ä (`RegisterAndInitKernels`)
3. –ó–∞–ø—É—Å–∫ —è–¥–µ—Ä (`RunKernel`)
4. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å –º–æ–¥—É–ª–µ–π (`RegisterAndInitModules`)
6. –û–∂–∏–¥–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (`WaitForShutdown`)

---

## –ü—Ä–∏–º–µ—Ä main.go

```go
func main() {
    appInstance, err := app.NewApp()
    if err != nil {
        log.Fatal(err)
    }

    err := appInstance.RegisterAndInitKernels(
        &http.HttpKernel{},
    )
    if err != nil {
        panic(err)
    }
    
    err = appInstance.RegisterAndInitModules(
        &CommonModule{},
    )
    
    if err != nil {
        panic(err)
    }
    
    if err := a.RunKernel(http.HttpKernelName); err != nil {
        panic(err)
    }
    
    appInstance.WaitForShutdown()
}
```

---

## üß© Dependency Injection (pkg/di)

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- singleton –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- —Ñ–∞–±—Ä–∏–∫–∏ (lazy)
- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø–æ —Ç–∏–ø—É

[–ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã —Å DI](../di/README.MD)

## –ò—Ç–æ–≥

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π lifecycle, –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π graceful shutdown  
–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ Docker / Kubernetes.
